<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Applicants — Attractive Dashboard</title>
  <style>
    :root{
      --bg-1:#0f172a; --bg-2:#071224;
      --card:#0b1220; --muted:#93a3b8; --accent:#06b6d4; --accent-2:#7c3aed;
      --green:#10b981; --glass: rgba(255,255,255,0.04);
      --radius:14px; --gap:14px; --max:1200px;
      --glass-2: linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      font-family: Inter, ui-sans-serif, system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color:#e6eef6;
    }
    html,body{height:100%;margin:0;background:radial-gradient(1200px 600px at 10% 10%, rgba(7,18,36,0.6), transparent), linear-gradient(180deg,var(--bg-1),var(--bg-2));-webkit-font-smoothing:antialiased}
    .wrap{max-width:var(--max);margin:28px auto;padding:20px}
    .header{
      display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:20px;
    }
    .brand{display:flex;gap:12px;align-items:center}
    .logo{
      width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));
      display:flex;align-items:center;justify-content:center;font-weight:800;color:#031124;font-size:20px;box-shadow:0 6px 24px rgba(124,58,237,0.16);
    }
    h1{margin:0;font-size:20px;letter-spacing:0.2px}
    .sub{color:var(--muted);font-size:13px;margin-top:4px}
    .controls{display:flex;gap:10px;align-items:center}
    .search{
      display:flex;align-items:center;background:var(--card);border-radius:12px;padding:8px 12px;gap:8px;box-shadow: inset 0 -2px 12px rgba(0,0,0,0.4);
      min-width:260px;
    }
    .search input{background:transparent;border:0;outline:0;color:inherit;width:200px;font-size:14px}
    .select, .btn{
      background:transparent;border:1px solid rgba(255,255,255,0.06);padding:9px 12px;border-radius:10px;color:var(--muted);cursor:pointer;font-size:14px;
    }
    .btn.primary{
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#031124;border:0;font-weight:600;box-shadow:0 8px 30px rgba(7,18,36,0.45);
    }

    .layout{display:grid;grid-template-columns:1fr 360px;gap:18px}
    .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); border-radius:var(--radius); padding:16px; box-shadow: 0 10px 30px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.03)}
    .list-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .count{font-size:18px;font-weight:700}
    .filters-row{display:flex;gap:8px;align-items:center}
    .pill{background:var(--glass);padding:6px 10px;border-radius:999px;color:var(--muted);font-weight:600;font-size:13px}

    .app-list{display:flex;flex-direction:column;gap:12px}
    .app{
      display:flex;gap:14px;align-items:flex-start;padding:14px;border-radius:12px;transition:transform .16s ease, box-shadow .16s ease;
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); border:1px solid rgba(255,255,255,0.03);
    }
    .app:hover{transform:translateY(-6px);box-shadow:0 18px 50px rgba(2,6,23,0.6)}
    .avatar{
      width:62px;height:62px;border-radius:12px;background:linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--accent);font-size:18px;flex-shrink:0;border:1px solid rgba(255,255,255,0.02)
    }
    .meta-col{flex:1;min-width:0}
    .meta-row{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .meta-row h3{margin:0;font-size:16px}
    .job-meta{display:flex;gap:10px;align-items:center;color:var(--muted);font-size:13px;margin-top:8px}
    .status{
      padding:6px 10px;border-radius:999px;font-weight:700;font-size:13px;
    }
    .status.new{background:rgba(16,185,129,0.1);color:var(--green);border:1px solid rgba(16,185,129,0.12)}
    .status.reviewed{background:rgba(96,165,250,0.06);color:#60a5fa;border:1px solid rgba(96,165,250,0.08)}
    .status.shortlisted{background:rgba(124,58,237,0.06);color:var(--accent-2);border:1px solid rgba(124,58,237,0.08)}

    .actions{display:flex;gap:8px;flex-direction:column;align-items:flex-end}
    .link{background:transparent;border:0;color:var(--accent);cursor:pointer;padding:6px 8px;border-radius:8px}
    .small{font-size:13px;color:var(--muted)}

    /* sidebar */
    .sidebar .card{margin-bottom:12px;padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border:1px solid rgba(255,255,255,0.03)}
    .kpi{display:flex;gap:12px;align-items:center}
    .kpi .num{font-weight:800;font-size:22px}
    .muted{color:var(--muted)}

    /* profile modal */
    .modal {
      position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg, rgba(2,6,23,0.6), rgba(2,6,23,0.8));z-index:1200;opacity:0;pointer-events:none;transition:opacity .18s ease;
    }
    .modal.show{opacity:1;pointer-events:auto}
    .modal-card{width:760px;background:linear-gradient(180deg,#031124, #071224);border-radius:16px;padding:18px;border:1px solid rgba(255,255,255,0.04);box-shadow:0 30px 80px rgba(2,6,23,0.8);display:flex;gap:16px}
    .profile-left{width:250px;display:flex;flex-direction:column;align-items:center;gap:12px;padding-right:12px;border-right:1px solid rgba(255,255,255,0.02)}
    .profile-avatar{width:120px;height:120px;border-radius:16px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-size:36px;font-weight:800;color:#031124}
    .profile-main{flex:1}
    .close-x{background:transparent;border:0;color:var(--muted);font-size:22px;cursor:pointer;position:absolute;top:22px;right:22px}

    /* empty */
    .empty{padding:28px;text-align:center;color:var(--muted);border-radius:10px;border:1px dashed rgba(255,255,255,0.03);background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent)}

    /* responsive */
    @media (max-width:980px){
      .layout{grid-template-columns:1fr}
      .modal-card{width:calc(100% - 40px);flex-direction:column}
      .profile-left{width:100%;border-right:none;border-bottom:1px solid rgba(255,255,255,0.02);padding-bottom:12px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="header">
      <div class="brand">
        <div class="logo">WZ
        </div>
        <div>
          <h1>Applicants · Software Engineer</h1>
          <div class="sub">Acme Corp • Posted 24 Oct 2025 • <span class="muted">11 applicants</span></div>
        </div>
      </div>

      <div class="controls">
        <div class="search" role="search" aria-label="Search applicants">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="opacity:.8"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
          <input id="q" placeholder="Search name, email, phone or cover" />
        </div>

        <select id="statusFilter" class="select" aria-label="Filter by status">
          <option value="all">All</option>
          <option value="new">New</option>
          <option value="reviewed">Reviewed</option>
          <option value="shortlisted">Shortlisted</option>
        </select>

        <button class="btn primary" id="refreshBtn">Refresh</button>
      </div>
    </header>

    <main class="layout">
      <section class="panel">
        <div class="list-header">
          <div><span class="count" id="totalCount">0</span> applicants</div>
          <div class="filters-row">
            <div class="pill" id="showingCount">Showing 0</div>
            <div style="width:8px"></div>
            <div class="small muted">Sort</div>
            <select id="sortBy" class="select" aria-label="Sort applicants">
              <option value="recent">Most recent</option>
              <option value="name">Name A–Z</option>
            </select>
          </div>
        </div>

        <div id="appList" class="app-list" aria-live="polite">
          <!-- injected -->
        </div>

        <div id="empty" class="empty" hidden>
          <strong>No applicants yet</strong>
          <div style="margin-top:8px;color:var(--muted)">Share the job or wait for applicants to apply.</div>
        </div>
      </section>

      <aside class="sidebar">
        <div class="card panel">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="muted">Total applicants</div>
              <div class="num" id="kpiTotal">0</div>
            </div>
            <div style="text-align:right">
              <div class="muted">New</div>
              <div class="num" id="kpiNew">0</div>
            </div>
          </div>
        </div>

        <div class="card panel">
          <h4 style="margin:0 0 10px 0">Quick actions</h4>
          <div style="display:flex;flex-direction:column;gap:10px">
            <button class="select" id="downloadCsv">Download CSV</button>
            <button class="select" id="bulkShortlist">Shortlist Selected</button>
            <button class="select" id="clearSelection">Clear Selection</button>
          </div>
        </div>

        <div class="card panel">
          <h4 style="margin:0 0 10px 0">Filters</h4>
          <label class="small"><input type="checkbox" id="hasResume" /> Has resume</label><br/>
          <label class="small"><input type="checkbox" id="hasCover" /> Has cover note</label>
        </div>
      </aside>
    </main>
  </div>

  <!-- Profile Modal -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-card" role="document">
      <button class="close-x" id="closeModal" title="Close">&times;</button>
      <div class="profile-left">
        <div class="profile-avatar" id="modalAvatar">RS</div>
        <div style="text-align:center">
          <div id="modalName" style="font-weight:700;font-size:18px">Name</div>
          <div class="small muted" id="modalApplied">Applied: —</div>
          <div style="margin-top:8px"><span class="pill" id="modalStatus">Status</span></div>
        </div>
      </div>
      <div class="profile-main">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
          <div>
            <div class="muted">Contact</div>
            <div id="modalEmail" class="small">email@example.com</div>
            <div id="modalPhone" class="small">+91 …</div>
          </div>
          <div style="text-align:right">
            <a id="modalResume" class="link" href="#" target="_blank">View resume</a>
            <div style="margin-top:10px">
              <button class="select" id="markReviewedBtn">Mark reviewed</button>
              <button class="select" id="shortlistBtn">Shortlist</button>
            </div>
          </div>
        </div>

        <div>
          <div class="muted">Cover note</div>
          <div id="modalCover" style="margin-top:8px;color:#dbeafe"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Demo data — replace with server data or API
    const applicants = [
      { _id:'a1', fullName:'Rajan Singh', phone:'+91 7706859838', email:'rajansingh8593@gmail.com', resume:'http://localhost:3001/apply', cover:'Focused on backend, team-player', status:'new', appliedAt:'2025-09-28' },
      { _id:'a2', fullName:'Rahul Kumar', phone:'+91 842321857', email:'rahul@gmail.com', resume:'', cover:'Experienced in Node.js and cloud deployment', status:'reviewed', appliedAt:'2025-09-26' },
      { _id:'a3', fullName:'Priya Sharma', phone:'+91 9012345678', email:'priya@domain.com', resume:'http://drive.com/priya.pdf', cover:'Interested in scalable systems and performance tuning', status:'shortlisted', appliedAt:'2025-09-25' },
      { _id:'a4', fullName:'Anita Desai', phone:'+91 9812345670', email:'anita@domain.com', resume:'', cover:'Fresher with internship experience', status:'new', appliedAt:'2025-09-24' }
    ];

    const state = { data: applicants.slice(), selected: new Set(), currentList: [] };

    // DOM refs
    const appList = document.getElementById('appList');
    const totalCount = document.getElementById('totalCount');
    const showingCount = document.getElementById('showingCount');
    const kpiTotal = document.getElementById('kpiTotal');
    const kpiNew = document.getElementById('kpiNew');

    // Helpers
    const esc = s => s ? String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[c])) : '';
    const fmtDate = d => new Date(d).toLocaleDateString();

    function renderList(list){
      appList.innerHTML = '';
      state.currentList = list;
      if(!list.length){
        document.getElementById('empty').hidden = false;
      } else {
        document.getElementById('empty').hidden = true;
      }

      list.forEach(item => {
        const el = document.createElement('div');
        el.className = 'app';
        el.dataset.id = item._id;
        el.innerHTML = `
          <div class="avatar">${(item.fullName||'U').split(' ').map(x=>x[0]).slice(0,2).join('')}</div>
          <div class="meta-col">
            <div class="meta-row">
              <h3>${esc(item.fullName)}</h3>
              <div class="status ${item.status}">${esc(item.status || 'new')}</div>
            </div>
            <div class="job-meta">
              <div class="small">${esc(item.email)}</div>
              <div class="small">•</div>
              <div class="small">${esc(item.phone)}</div>
              <div class="small">•</div>
              <div class="small">Applied ${fmtDate(item.appliedAt)}</div>
            </div>
            <div style="margin-top:10px" class="small">${esc(item.cover || '')}</div>
          </div>
          <div class="actions">
            <button class="select" onclick="openProfile('${item._id}')">Open</button>
            <button class="select" onclick="toggleSelect('${item._id}')">${state.selected.has(item._id)?'Selected':'Select'}</button>
            <a class="link" href="${item.resume || '#'}" target="_blank">${item.resume ? 'View resume' : 'No resume'}</a>
          </div>
        `;
        appList.appendChild(el);
      });

      totalCount.textContent = applicants.length;
      showingCount.textContent = `Showing ${list.length}`;
      kpiTotal.textContent = applicants.length;
      kpiNew.textContent = applicants.filter(a=>a.status==='new').length;
    }

    function applyFilters(){
      const q = document.getElementById('q').value.trim().toLowerCase();
      const status = document.getElementById('statusFilter').value;
      const mustResume = document.getElementById('hasResume')?.checked;
      const mustCover = document.getElementById('hasCover')?.checked;
      const sortBy = document.getElementById('sortBy')?.value;

      let filtered = state.data.filter(a=>{
        if(status !== 'all' && a.status !== status) return false;
        if(mustResume && !a.resume) return false;
        if(mustCover && !a.cover) return false;
        if(!q) return true;
        return (a.fullName||'').toLowerCase().includes(q) ||
               (a.email||'').toLowerCase().includes(q) ||
               (a.phone||'').toLowerCase().includes(q) ||
               (a.cover||'').toLowerCase().includes(q);
      });

      if(sortBy === 'name') filtered.sort((x,y)=>x.fullName.localeCompare(y.fullName));
      else filtered.sort((x,y)=>new Date(y.appliedAt) - new Date(x.appliedAt));

      renderList(filtered);
    }

    // Actions
    function toggleSelect(id){
      if(state.selected.has(id)) state.selected.delete(id); else state.selected.add(id);
      applyFilters();
    }

    document.getElementById('q').addEventListener('input', applyFilters);
    document.getElementById('statusFilter').addEventListener('change', applyFilters);
    document.getElementById('sortBy').addEventListener('change', applyFilters);
    document.getElementById('refreshBtn').addEventListener('click', ()=>{ /* re-fetch from API */ applyFilters(); });

    document.getElementById('downloadCsv').addEventListener('click', () => {
      const rows = state.currentList.map(a => [a._id, a.fullName, a.email, a.phone, (a.resume||''), (a.cover||'')]);
      const csv = ['id,name,email,phone,resume,cover', ...rows.map(r=>r.map(c=>`"${String(c||'').replace(/"/g,'""')}"`).join(','))].join('\n');
      const blob = new Blob([csv], {type:'text/csv'}); const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'applicants.csv'; a.click(); URL.revokeObjectURL(url);
    });

    document.getElementById('bulkShortlist').addEventListener('click', () => {
      applicants.forEach(a => { if(state.selected.has(a._id)) a.status = 'shortlisted'; });
      state.selected.clear(); applyFilters();
    });

    document.getElementById('clearSelection').addEventListener('click', () => { state.selected.clear(); applyFilters(); });

    // Modal logic
    const modal = document.getElementById('modal');
    const closeModal = document.getElementById('closeModal');
    function openProfile(id){
      const item = applicants.find(a=>a._id===id); if(!item) return;
      document.getElementById('modalAvatar').textContent = (item.fullName||'U').split(' ').map(s=>s[0]).slice(0,2).join('');
      document.getElementById('modalName').textContent = item.fullName;
      document.getElementById('modalApplied').textContent = 'Applied: ' + fmtDate(item.appliedAt);
      const statusEl = document.getElementById('modalStatus'); statusEl.textContent = item.status; statusEl.className = 'pill';
      document.getElementById('modalEmail').textContent = item.email;
      document.getElementById('modalPhone').textContent = item.phone;
      document.getElementById('modalResume').href = item.resume || '#';
      document.getElementById('modalCover').textContent = item.cover || '—';
      modal.classList.add('show'); modal.setAttribute('aria-hidden','false');

      // wire action buttons
      document.getElementById('markReviewedBtn').onclick = () => { item.status = 'reviewed'; applyFilters(); };
      document.getElementById('shortlistBtn').onclick = () => { item.status = 'shortlisted'; applyFilters(); };
    }
    closeModal.addEventListener('click', ()=>{ modal.classList.remove('show'); modal.setAttribute('aria-hidden','true'); });

    // click outside to close
    modal.addEventListener('click', (e)=>{ if(e.target === modal){ modal.classList.remove('show'); modal.setAttribute('aria-hidden','true'); } });

    // initial render
    renderList(applicants);
  </script>
</body>
</html>
